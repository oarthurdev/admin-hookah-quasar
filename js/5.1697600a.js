(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"486b":function(e,t,a){},cd56:function(e,t,a){"use strict";a("486b")},cdd0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md row items-start q-gutter-md"},[a("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[a("center",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(e._s(e.user.email))])]),a("q-card-section",{staticClass:"q-pt-none"},[a("img",{staticClass:"img-profile",attrs:{src:"http://localhost:8080/"+e.user.photo,alt:"User Image"}})]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[e._v("\r\n        "+e._s(e.user.role)+"\r\n      ")])],1)],1),a("q-card",{staticClass:"card-update-profile",staticStyle:{"margin-left":"50px"},attrs:{flat:"",bordered:""}},[a("center",[a("q-card-section",[a("div",{staticClass:"text-h6",staticStyle:{"margin-bottom":"20px"}},[e._v("Update your data")]),a("q-form",{staticClass:"q-gutter-md",on:{submit:e.submit}},[a("q-input",{staticStyle:{"margin-bottom":"35px"},attrs:{filled:"",label:"Your email *",disable:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),a("q-input",{attrs:{filled:"",type:"password",label:"Your password *","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),a("q-input",{attrs:{filled:"",type:"password",label:"Your new password *","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.user.passwordR,callback:function(t){e.$set(e.user,"passwordR",t)},expression:"user.passwordR"}}),a("q-input",{attrs:{filled:"",type:"password",label:"Repeat password *","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Please type something"}]},model:{value:e.user.passwordRR,callback:function(t){e.$set(e.user,"passwordRR",t)},expression:"user.passwordRR"}}),a("picture-input",{ref:"pictureInput",attrs:{width:"200",height:"200",margin:"16",accept:"image/jpeg,image/png",size:"10",buttonClass:"btn",customStrings:{upload:"<h1>Bummer!</h1>",drag:"Upload a profile picture"}},on:{change:e.onChange}}),a("div",[a("q-btn",{staticClass:"float-right",staticStyle:{"margin-bottom":"10px"},attrs:{label:"Submit",type:"submit",color:"primary"}})],1)],1)],1)],1)],1)],1)},r=[],o=a("e597"),l={name:"Profile",data(){return{user:{email:null,photo:null,role:null,name:null,password:null,passwordR:null,passwordRR:null,name_file:null},image:null}},created(){let e=this;e.user.email=localStorage.getItem("email"),e.token=localStorage.getItem("token"),e.$axios.post("/user/get-photo",{email:e.user.email}).then((function(t){t.data?e.user.photo=t.data.profile_picture:console.log("Error")})),e.$axios.post("/user/get-role",{email:e.user.email}).then((function(t){t.data?e.user.role=t.data.role_name:console.log("Error")}))},methods:{submit(e){let t=this;e.preventDefault(),this.$axios.post("/user/upload-image",{image:t.image,email:t.user.email}).then((function(e){e.data&&(t.user.name_file=e.data.name_file)}));let a=this.$axios.post("/user/profile",{email:t.user.email,password:t.user.password,passwordR:t.user.passwordR,passwordRR:t.user.passwordRR,name_file:t.user.name_file}).then((function(e){console.log(e),e.data.diffPass?t.$awn.alert("Your current password is wrong."):e.data.diffPass2?t.$awn.alert("Passwords entered do not match"):e.data?(t.$awn.async(a,"Profile updated successfully."),setTimeout((()=>{location.reload()}),5e3)):t.$awn.alert("Oops, something went wrong, try again later.")}))},onChange(e){console.log("New picture selected!"),e?(console.log("Picture loaded."),this.image=e):console.log("FileReader API not supported: use the <form>, Luke!")}},components:{PictureInput:o["a"]}},n=l,i=(a("cd56"),a("2877")),u=a("f09f"),c=a("a370"),d=a("eb85"),p=a("0378"),m=a("27f9"),f=a("9c40"),g=a("eebe"),w=a.n(g),h=Object(i["a"])(n,s,r,!1,null,"ecbe8b6e",null);t["default"]=h.exports;w()(h,"components",{QCard:u["a"],QCardSection:c["a"],QSeparator:d["a"],QForm:p["a"],QInput:m["a"],QBtn:f["a"]})}}]);